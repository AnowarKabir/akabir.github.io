<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Quiz 1</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            border: 1px solid #cc4;
            border-radius: 10px;
        }
        h2 {
            color: green;
        }
        h3 {
            color: blue;
            font-size: 24px; /* Bigger font for questions */
        }
        button {
            margin-top: 10px;
            padding: 15px 30px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
        input[type="radio"] {
            margin-bottom: 20px; /* Space between options */
            transform: scale(1.3); /* Increase the size of radio buttons */
        }
        .input-section {
            margin-bottom: 20px;
        }
        #resultsTable {
            display: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
    </style>
</head>
<body>

    <!-- Input section for Name, Batch No, ID -->
    <div id="userInput">
        <h2>Python Quiz 01</h2>
        <h2>Please Enter Your Details:</h2>
        <div class="input-section">
            <label for="name">Name: </label>
            <input type="text" id="name" placeholder="Enter your name" required><br><br>
            <label for="batchNo">Batch No: </label>
            <input type="text" id="batchNo" placeholder="Enter your batch number" required><br><br>
            <label for="studentId">ID: </label>
            <input type="text" id="studentId" placeholder="Enter your ID" required><br><br>
        </div>
        <button onclick="startQuiz()">Start Quiz</button>
    </div>

    <div id="test_status" style="display:none;"></div>
    <div id="test" style="display:none;"></div>
    <button id="pdfButton" style="display: none;" onclick="generatePDF()">Download Report as PDF</button>
    <button id="showTableButton" style="display: none;" onclick="showResultsTable()">Show My Results Table</button>

    <!-- Table to display the results -->
    <div id="resultsTable">
        <h2>Your Results</h2>
        <table>
            <tr>
                <th>Question No</th>
                <th>Your Answer</th>
                <th>Correct Answer</th>
                <th>Result</th>
            </tr>
            <tbody id="resultsTableBody"></tbody>
        </table>
    </div>

    <script>
        var pos = 0, test, test_status, question, choice, choices, chA, chB, chC, correct = 0;
        var userAnswers = [];
        var theoreticalAnswers = { Q8: "", Q9: "" }; // For theoretical answers
        var name, batchNo, studentId;
        var questions = [
            ["1. If x = 5, what is a correct syntax for printing the data type of the variable x?", "A) print(dtype(x))", "B) print(type(x))", "C) print(x.dtype())", "B"],
            ["2. Which is NOT a legal numeric data type in Python?", "A) int", "B) long", "C) float", "B"],
            ["3. What will be the result of the following code: x = 'Welcome'; print(x[3])", "A) Wel", "B) c", "C) Welcome Welcome Welcom", "B"],
            ["4. What will be the result of the following syntax: x = 5; x += 6; print(x)", "A) 5", "B) 6", "C) 11", "C"],
            ["5. What will be the result of the following syntax: mylist = ['apple', 'banana', 'cherry']; print(mylist[-1])", "A) apple", "B) banana", "C) cherry", "C"],
            ["6. Which one of these is a tuple?", "A) thistuple = ('apple', 'banana', 'cherry')", "B) thistuple = ['apple', 'banana', 'cherry']", "C) thistuple = {'apple', 'banana', 'cherry'}", "A"],
            ["7. Which one of these is a set?", "A) myset = ('apple', 'banana', 'cherry')", "B) myset = ['apple', 'banana', 'cherry']", "C) myset = {'apple', 'banana', 'cherry'}", "C"]
        ];

        function _(x) {
            return document.getElementById(x);
        }

        function startQuiz() {
            name = _("name").value;
            batchNo = _("batchNo").value;
            studentId = _("studentId").value;
            if (!name || !batchNo || !studentId) {
                alert("Please fill all fields before starting the quiz.");
                return;
            }
            _("userInput").style.display = "none"; // Hide input form
            _("test").style.display = "block"; // Show the test
            _("test_status").style.display = "block"; // Show the status
            renderQuestion();
        }

        function renderQuestion() {
            test = _("test");
            if (pos >= questions.length) {
                // After MCQs, show theoretical questions
                renderTheoreticalQuestions();
                return false;
            }
            _("test_status").innerHTML = "Question " + (pos + 1) + " of " + questions.length;
            question = questions[pos][0];
            chA = questions[pos][1];
            chB = questions[pos][2];
            chC = questions[pos][3];
            test.innerHTML = "<h3>" + question + "</h3>";
            test.innerHTML += "<input type='radio' name='choices' value='A'> " + chA + "<br>";
            test.innerHTML += "<input type='radio' name='choices' value='B'> " + chB + "<br>";
            test.innerHTML += "<input type='radio' name='choices' value='C'> " + chC + "<br><br>";
            test.innerHTML += "<button onclick='checkAnswer()'>Submit Answer</button>";
        }

        function checkAnswer() {
            choices = document.getElementsByName("choices");
            choice = null;
            for (var i = 0; i < choices.length; i++) {
                if (choices[i].checked) {
                    choice = choices[i].value;
                    break;
                }
            }
            if (choice) {
                userAnswers.push(choice);
                if (choice === questions[pos][4]) {
                    correct++;
                }
                pos++;
                renderQuestion();
            } else {
                alert("Please select an answer before submitting.");
            }
        }

        function renderTheoreticalQuestions() {
            test.innerHTML = `
                <h3>8. Write a Python program to reverse a string.</h3>
                <textarea id="theoreticalQ8" rows="4" cols="50"></textarea><br><br>
                <h3>9. Write a Python program to find the factorial of a number using recursion.</h3>
                <textarea id="theoreticalQ9" rows="4" cols="50"></textarea><br><br>
                <button onclick="submitTheoreticalAnswers()">Submit Theoretical Answers</button>
            `;
        }

        function submitTheoreticalAnswers() {
            theoreticalAnswers.Q8 = _("theoreticalQ8").value;
            theoreticalAnswers.Q9 = _("theoreticalQ9").value;

            _("test").innerHTML = `<h2>You completed the quiz!</h2>`;
            _("test_status").innerHTML = "Test Completed";
            _("pdfButton").style.display = "block"; // Show PDF button after submission
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            var doc = new jsPDF();

            doc.setFontSize(16);
            doc.text(20, 20, 'Python Quiz Results');
            doc.setFontSize(12);
            doc.text(20, 30, 'Name: ' + name);
            doc.text(20, 40, 'Batch No: ' + batchNo);
            doc.text(20, 50, 'Student ID: ' + studentId);

            doc.text(20, 60, 'MCQ Questions: You got ' + correct + ' out of ' + questions.length + ' correct.');
            let y = 70;
            for (var i = 0; i < questions.length; i++) {
                var questionText = questions[i][0];
                var options = 'Options: ' + questions[i][1] + ', ' + questions[i][2] + ', ' + questions[i][3];
                var userAnswer = userAnswers[i];
                var correctAnswer = questions[i][4];
                var isCorrect = userAnswer === correctAnswer ? "(Correct)" : "(Incorrect)";
                
                doc.text(20, y, questionText);
                y += 10;
                doc.text(20, y, options);
                y += 10;
                doc.text(20, y, "Your Answer: " + userAnswer + " " + isCorrect);
                y += 10;
                doc.text(20, y, "Correct Answer: " + correctAnswer);
                y += 10;

                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
            }

            y += 10;
            doc.text(20, y, 'Theoretical Questions:');
            y += 10;

            doc.text(20, y, 'Q8: Write a Python program that reverses a string.');
            y += 10;
            var answerQ8 = theoreticalAnswers.Q8.split("\n");
            answerQ8.forEach(line => {
                doc.text(20, y, line);
                y += 10;
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
            });

            doc.text(20, y, 'Q9: Write a Python program that finds the factorial of a number using recursion.');
            y += 10;
            var answerQ9 = theoreticalAnswers.Q9.split("\n");
            answerQ9.forEach(line => {
                doc.text(20, y, line);
                y += 10;
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
            });

            doc.save(name + '_Quiz_Results.pdf');
            
            _("showTableButton").style.display = "block"; // Show button to view table after PDF download
        }

        function showResultsTable() {
            var tableBody = _("resultsTableBody");
            tableBody.innerHTML = ""; // Clear previous data

            for (var i = 0; i < questions.length; i++) {
                var row = document.createElement("tr");
                var questionNo = document.createElement("td");
                var yourAnswer = document.createElement("td");
                var correctAnswer = document.createElement("td");
                var result = document.createElement("td");

                questionNo.innerText = i + 1;
                yourAnswer.innerText = userAnswers[i];
                correctAnswer.innerText = questions[i][4];
                result.innerText = (userAnswers[i] === questions[i][4]) ? "Correct" : "Incorrect";
                result.className = (userAnswers[i] === questions[i][4]) ? "correct" : "incorrect";

                row.appendChild(questionNo);
                row.appendChild(yourAnswer);
                row.appendChild(correctAnswer);
                row.appendChild(result);

                tableBody.appendChild(row);
            }

            _("resultsTable").style.display = "block"; // Show the table after data is added
        }
    </script>

</body>
</html>

