<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Quiz</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            border: 1px solid #cc4;
            border-radius: 10px;
        }
        h2 {
            color: green;
        }
        h3 {
            color: blue;
        }
        button {
            margin-top: 10px;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
    </style>
</head>
<body>

    <div id="test_status"></div>
    <div id="test"></div>
    <button id="pdfButton" style="display: none;" onclick="generatePDF()">Download Report as PDF</button>

    <script>
        var pos = 0, test, test_status, question, choice, choices, chA, chB, chC, correct = 0;
        var userAnswers = []; // To store user's answers
        var questions = [
            ["1. If x = 5, what is a correct syntax for printing the data type of the variable x?", "A) print(dtype(x))", "B) print(type(x))", "C) print(x.dtype())", "B"],
            ["2. Which is NOT a legal numeric data type in Python?", "A) int", "B) long", "C) float", "B"],
            ["3. What will be the result of the following code: x = 'Welcome'; print(x[3])", "A) Wel", "B) c", "C) Welcome Welcome Welcom", "B"],
            ["4. What will be the result of the following syntax: x = 5; x += 6; print(x)", "A) 5", "B) 6", "C) 11", "C"],
            ["5. What will be the result of the following syntax: mylist = ['apple', 'banana', 'cherry']; print(mylist[-1])", "A) apple", "B) banana", "C) cherry", "C"],
            ["6. Which one of these is a tuple?", "A) thistuple = ('apple', 'banana', 'cherry')", "B) thistuple = ['apple', 'banana', 'cherry']", "C) thistuple = {'apple', 'banana', 'cherry'}", "A"],
            ["7. Which one of these is a set?", "A) myset = ('apple', 'banana', 'cherry')", "B) myset = ['apple', 'banana', 'cherry']", "C) myset = {'apple', 'banana', 'cherry'}", "C"],
            ["What is 10 + 4?", "A) 12", "B) 14", "C) 16", "B"],
            ["What is 20 - 9?", "A) 7", "B) 13", "C) 11", "C"],
            ["What is 7 x 3?", "A) 21", "B) 24", "C) 25", "A"],
            ["What is 8 / 2?", "A) 10", "B) 2", "C) 4", "C"]
        ];

        function _(x) {
            return document.getElementById(x);
        }

        function renderQuestion() {
            test = _("test");
            if (pos >= questions.length) {
                displayResults();
                return false;
            }
            _("test_status").innerHTML = "Question " + (pos + 1) + " of " + questions.length;
            question = questions[pos][0];
            chA = questions[pos][1];
            chB = questions[pos][2];
            chC = questions[pos][3];
            test.innerHTML = "<h3>" + question + "</h3>";
            test.innerHTML += "<input type='radio' name='choices' value='A'> " + chA + "<br>";
            test.innerHTML += "<input type='radio' name='choices' value='B'> " + chB + "<br>";
            test.innerHTML += "<input type='radio' name='choices' value='C'> " + chC + "<br><br>";
            test.innerHTML += "<button onclick='checkAnswer()'>Submit Answer</button>";
        }

        function checkAnswer() {
            choices = document.getElementsByName("choices");
            choice = null; // Initialize choice
            for (var i = 0; i < choices.length; i++) {
                if (choices[i].checked) {
                    choice = choices[i].value;
                    break; // Exit loop once a choice is made
                }
            }
            if (choice) {
                userAnswers.push(choice); // Store the user's answer
                if (choice === questions[pos][4]) {
                    correct++;
                }
                pos++;
                renderQuestion();
            } else {
                alert("Please select an answer before submitting.");
            }
        }

        function displayResults() {
            var resultHTML = "<h2>You got " + correct + " out of " + questions.length + " questions correct.</h2>";
            resultHTML += "<h3>Your Answers:</h3>";
            resultHTML += "<ul>";
            for (var i = 0; i < questions.length; i++) {
                var answerClass = userAnswers[i] === questions[i][4] ? "correct" : "incorrect";
                resultHTML += "<li>Q" + (i + 1) + ": " + questions[i][0] + "<br>";
                resultHTML += "Options: " + questions[i][1] + ", " + questions[i][2] + ", " + questions[i][3] + "<br>";
                resultHTML += "Your Answer: <span class='" + answerClass + "'>" + userAnswers[i] + "</span> | Correct Answer: <span class='correct'>" + questions[i][4] + "</span></li>";
            }
            resultHTML += "</ul>";
            _("test").innerHTML = resultHTML;
            _("test_status").innerHTML = "Test Completed";
            _("pdfButton").style.display = "block"; // Show PDF button
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            let reportContent = `Quiz Report\n\nYou got ${correct} out of ${questions.length} questions correct.\n\nYour Answers:\n`;
            for (var i = 0; i < questions.length; i++) {
                reportContent += `Q${i + 1}: ${questions[i][0]}\n`;
                reportContent += `Options: ${questions[i][1]}, ${questions[i][2]}, ${questions[i][3]}\n`;
                reportContent += `Your Answer: ${userAnswers[i]} | Correct Answer: ${questions[i][4]}\n\n`;
            }

            doc.text(reportContent, 10, 10);
            doc.save('quiz_report.pdf');
        }

        window.addEventListener("load", renderQuestion, false);
    </script>

</body>
</html>
