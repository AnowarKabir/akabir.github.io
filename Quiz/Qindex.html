<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Quiz 1</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            border: 1px solid #cc4;
            border-radius: 10px;
        }
        h2 {
            color: green;
        }
        h3 {
            color: blue;
            font-size: 24px; /* Bigger font for questions */
        }
        button {
            margin-top: 10px;
            padding: 15px 30px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
        input[type="radio"] {
            margin-bottom: 20px; /* Space between options */
            transform: scale(1.3); /* Increase the size of radio buttons */
        }
        .input-section {
            margin-bottom: 20px;
        }
        .code-box {
            border: 2px solid #ccc;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
            font-family: monospace;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <!-- Input section for Name, Batch No, ID -->
    <div id="userInput">
        <h2>Python Quiz 01</h2>
        <h2>Please Enter Your Details:</h2>
        <div class="input-section">
            <label for="name">Name: </label>
            <input type="text" id="name" placeholder="Enter your name" required><br><br>
            <label for="batchNo">Batch No: </label>
            <input type="text" id="batchNo" placeholder="Enter your batch number" required><br><br>
            <label for="studentId">ID: </label>
            <input type="text" id="studentId" placeholder="Enter your ID" required><br><br>
        </div>
        <button onclick="startQuiz()">Start Quiz</button>
    </div>

    <div id="test_status" style="display:none;"></div>
    <div id="test" style="display:none;"></div>
    <button id="pdfButton" style="display: none;" onclick="generatePDF()">Download Report as PDF</button>

    <script>
        var pos = 0, test, test_status, question, choice, choices, chA, chB, chC, correct = 0;
        var userAnswers = [];
        var name, batchNo, studentId;
        var mcqPartStarted = false; // Track when we start the MCQs
       var questions = [
            ["1. If x = 5, what is a correct syntax for printing the data type of the variable x?", "A) print(dtype(x))", "B) print(type(x))", "C) print(x.dtype())", "B"],
            ["2. Which is NOT a legal numeric data type in Python?", "A) int", "B) long", "C) float", "B"],
            ["3. What will be the result of the following code: <br><pre><code>x = 'Welcome'<br>print(x[3])</code></pre>", "A) Wel", "B) c", "C) Welcome Welcome Welcom", "B"],
            ["4. What will be the result of the following syntax: <br><pre><code>x = 5<br>x += 6<br>print(x)</code></pre>", "A) 5", "B) 6", "C) 11", "C"],
            ["5. What will be the result of the following syntax: <br><pre><code>mylist = ['apple', 'banana', 'cherry']<br>print(mylist[-1])</code></pre>", "A) apple", "B) banana", "C) cherry", "C"],
            ["6. Which one of these is a tuple?", "A) thistuple = ('apple', 'banana', 'cherry')", "B) thistuple = ['apple', 'banana', 'cherry']", "C) thistuple = {'apple', 'banana', 'cherry'}", "A"],
            ["7. Which one of these is a set?", "A) myset = ('apple', 'banana', 'cherry')", "B) myset = ['apple', 'banana', 'cherry']", "C) myset = {'apple', 'banana', 'cherry'}", "C"],

        ["8. Which of the following correctly checks if a variable x is equal to 10?",
        "A) if x = 10:",
        "B) if x == 10:",
        "C) if x => 10:",
        "B"
    ],
    [
        "9. What does the following code print:<br><pre><code>for i in range(3):<br>    print(i)</code></pre>",
        "A) All combinations of i and j",
        "B) 0 1 2",
        "C) 0 1 2 3",
        "B"
    ],
    [
        "10. Which of the following methods can be used to add an element to a list?",
        "A) list.add()",
        "B) list.append()",
        "C) list.insert()",
        "B"
    ],
    [
        "11. What will be the output of the following code:<br><pre><code>for i in range(2):<br>    for j in range(2):<br>        print(i, j)</code></pre>",
        "A) All combinations of i and j",
        "B) Only 0 0",
        "C) Only 1 1",
        "A"
    ],
    [
        "12. What will be the output of the following code:<br><pre><code>x = [1, 2, 3]<br>x[0] = 10<br>print(x)</code></pre>",
        "A) [10, 2, 3]",
        "B) [1, 2, 3]",
        "C) Error",
        "A"
    ],
    [
        "13. Which of the following is a valid variable name in Python?",
        "A) 1variable",
        "B) variable_1",
        "C) variable-1",
        "B"
    ],
    [
        "14. How do you start a comment in Python?",
        "A) //",
        "B) #",
        "C) --",
        "B"
    ],
    [
        "15. What will the following code print:<br><pre><code>myset = {1, 2, 3}<br>myset.add(2)<br>print(myset)</code></pre>",
        "A) {1, 2, 3}",
        "B) {1, 2, 2, 3}",
        "C) {2, 3}",
        "A"
    ]
        ];



        var codingQuestions = [
            {
                question: "1. Write a Python function to find the factorial of a number.",
                description: "You need to implement a function `factorial(n)` that takes a number `n` and returns the factorial of `n`.",
                placeholder: "# Write your code here\n\n",
                correctAnswer: "def factorial(n):\n    if n == 0:\n        return 1\n    else:\n        return n * factorial(n - 1)"
            },
            {
                question: "2. Write a Python function to reverse a string.",
                description: "You need to implement a function `reverse_string(s)` that takes a string `s` and returns the reversed string.",
                placeholder: "# Write your code here\n\n",
                correctAnswer: "def reverse_string(s):\n    return s[::-1]"
            }
        ];

        function _(x) {
            return document.getElementById(x);
        }

        function startQuiz() {
            name = _("name").value;
            batchNo = _("batchNo").value;
            studentId = _("studentId").value;
            if (!name || !batchNo || !studentId) {
                alert("Please fill all fields before starting the quiz.");
                return;
            }
            _("userInput").style.display = "none"; // Hide input form
            _("test").style.display = "block"; // Show the test
            _("test_status").style.display = "block"; // Show the status
            renderCodingQuestions(); // Start with the coding questions
        }

        function renderCodingQuestions() {
            var codingHTML = "<h2>Part 1: Coding Problems</h2>";
            codingQuestions.forEach((codingQ, index) => {
                codingHTML += "<h3>" + codingQ.question + "</h3>";
                codingHTML += "<p>" + codingQ.description + "</p>";
                codingHTML += "<div class='code-box'><textarea id='codingAnswer" + index + "' rows='6' cols='80' placeholder='" + codingQ.placeholder + "'></textarea></div>";
            });
            codingHTML += "<button onclick='renderMCQs()'>Proceed to Part 2: MCQs</button>";
            _("test").innerHTML = codingHTML;
        }

        function renderMCQs() {
            mcqPartStarted = true; // Mark the MCQ part as started
            pos = 0; // Reset position for MCQs
            renderQuestion();
        }

        function renderQuestion() {
            if (!mcqPartStarted) {
                renderMCQs(); // Make sure to start the MCQ part if not already started
                return;
            }
            test = _("test");
            if (pos >= questions.length) {
                displayResults(); // Move to final results
                return false;
            }
            _("test_status").innerHTML = "Part 2: Question " + (pos + 1) + " of " + questions.length;
            question = questions[pos][0];
            chA = questions[pos][1];
            chB = questions[pos][2];
            chC = questions[pos][3];
            test.innerHTML = "<h3>" + question + "</h3>";
            test.innerHTML += "<input type='radio' name='choices' value='A'> " + chA + "<br>";
            test.innerHTML += "<input type='radio' name='choices' value='B'> " + chB + "<br>";
            test.innerHTML += "<input type='radio' name='choices' value='C'> " + chC + "<br><br>";
            test.innerHTML += "<button onclick='checkAnswer()'>Submit Answer</button>";
        }

        function checkAnswer() {
            choices = document.getElementsByName("choices");
            choice = null;
            for (var i = 0; i < choices.length; i++) {
                if (choices[i].checked) {
                    choice = choices[i].value;
                    break;
                }
            }
            if (choice) {
                userAnswers.push(choice);
                if (choice === questions[pos][4]) {
                    correct++;
                }
                pos++;
                renderQuestion();
            } else {
                alert("Please select an answer before submitting.");
            }
        }

        function displayResults() {
            var resultHTML = "<h2>You got " + correct + " out of " + questions.length + " questions correct.</h2>";
            resultHTML += "<h3>Your Answers:</h3>";
            resultHTML += "<ul>";
            for (var i = 0; i < questions.length; i++) {
                var answerClass = userAnswers[i] === questions[i][4] ? "correct" : "incorrect";
                resultHTML += "<li>Q" + (i + 1) + ": " + questions[i][0] + "<br>";
                resultHTML += "Options: " + questions[i][1] + ", " + questions[i][2] + ", " + questions[i][3] + "<br>";
                resultHTML += "Your Answer: <span class='" + answerClass + "'>" + userAnswers[i] + "</span> | Correct Answer: <span class='correct'>" + questions[i][4] + "</span></li>";
            }
            resultHTML += "</ul>";

            resultHTML += "<h3>Your Coding Answers:</h3>";
            codingQuestions.forEach((codingQ, index) => {
                var userCode = _("codingAnswer" + index).value.trim();
                resultHTML += "<li>" + codingQ.question + "<br>";
                resultHTML += "Your Code: <pre>" + userCode + "</pre>";
                resultHTML += "Expected Answer: <pre>" + codingQ.correctAnswer + "</pre></li>";
            });

            test.innerHTML = resultHTML;
            _("pdfButton").style.display = "block";
        }

        function generatePDF() {
            var { jsPDF } = window.jspdf;
            var doc = new jsPDF();

            var margin = 10;
            doc.setFontSize(12);
            doc.text(`Name: ${name}`, margin, margin);
            doc.text(`Batch No: ${batchNo}`, margin, margin + 10);
            doc.text(`Student ID: ${studentId}`, margin, margin + 20);

            doc.text(`Python Quiz Report`, margin, margin + 30);

            // Coding questions section
            doc.setFontSize(14);
            doc.text(`Part 1: Coding Problems`, margin, margin + 40);

            codingQuestions.forEach((codingQ, index) => {
                var userCode = _("codingAnswer" + index).value.trim();
                doc.setFontSize(12);
                doc.text(codingQ.question, margin, margin + 50);
                doc.text(`Your Answer:`, margin, margin + 60);
                doc.text(userCode || "No answer provided", margin, margin + 70);
                doc.text(`Correct Answer:`, margin, margin + 80);
                doc.text(codingQ.correctAnswer, margin, margin + 90);
                margin += 50; // Adjust for space between questions
            });

            // MCQ Section
            doc.setFontSize(14);
            doc.text(`Part 2: MCQs`, margin, margin + 50);

            let y = margin + 60;
            questions.forEach((q, i) => {
                doc.text(`${i + 1}. ${q[0]}`, margin, y);
                doc.text(`Your answer: ${userAnswers[i]} | Correct: ${q[4]}`, margin, y + 10);
                y += 20;
            });

            const filename = `Python_Quiz_Report_${name.replace(/ /g, "_")}.pdf`;
            doc.save(filename);
        }
    </script>

</body>
</html>
